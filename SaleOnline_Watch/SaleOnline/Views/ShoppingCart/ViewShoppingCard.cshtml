@model IEnumerable<SaleOnline.Models.ProductCard>
@{
    ViewBag.Title = "ViewShoppingCard";
    Layout = "~/Views/HomePage/Home.cshtml";
}

<h2>ViewShoppingCard</h2>

<h4>Danh sách các sản phẩm đang chọn</h4>
<table id="cartlist" cellspacing="0">
    <tr><td>Mã sản phẩm</td><td>Tên Sản phẩm</td><td>Đơn giá</td><td>Số lượng</td><td>Thành tiền</td><td>&nbsp;</td></tr>
    @foreach (var item in Model)
    {
        <tr>
            <td> @item.iProID</td>
            <td>@item.sProName</td>
            <td>@String.Format("{0:0,0}", @item.dPrice) VNĐ</td>
            @*Chỉnh sửa giỏ hàng gọi action UpdateCart*@
            @using (Html.BeginForm("UpdateCart", "ShoppingCart", new { @ProId = item.iProID }))
            {
                <td>@Html.TextBox("txtSoLuong", item.iQuantity, new { @size = 5 }) </td>
                <td>@String.Format("{0:0,0}", item.dPrice * item.iQuantity) VNĐ</td>
                <td>
                    <input type="submit" value="Cập nhật" />
                    <br />
                    @*Xóa giỏ hàng gọi về Action XoaGioHang*@
                    @Html.ActionLink("Xóa", "DeleteCart", new { @ProId = item.iProID })
                </td>
            }
        </tr>
    }
    <tr><td colspan="6" style="text-align:right;color:blue">Tổng thành tiền: @String.Format("{0:0,0}", @ViewBag.MoneySum)</td></tr>
    <tr><td colspan="6" style="text-align:right;color:blue"><a href="@Url.Action("Index","Home")">Tiếp tục mua hàng</a></td></tr>
    <tr>
        <td colspan="6" style="text-align:right;color:blue">
            @using (Html.BeginForm("Payment", "ShoppingCart"))
            {
                @ViewBag.ThongBao<br />@Html.Label("Nhập địa chỉ giao hàng: ") @Html.TextBox("txtAddress")<br /><input type="submit" value="Thanh Toán" />
            }
        </td>
    </tr>
</table>





<section class="section-reservation-form padding-top-100 padding-bottom-100">
    <div class="container">
        <div class="section-content">
            <div class="swin-sc swin-sc-title style-2">
                <h3 class="title"><span>Chi tiết giỏ hàng</span></h3>
            </div>
            <div class="reservation-form">
                <div class="swin-sc swin-sc-contact-form light mtl">
                    <table class="table table-striped" style="text-align: center;">
                        <thead>
                            <tr>
                                <th width="30%" style="text-align: center;">Product</th>
                                <th width="20%" style="text-align: center;">Price</th>
                                <th width="20%" style="text-align: center;">Qty.</th>
                                <th width="20%" style="text-align: center;">Total</th>
                                <th width="20%" style="text-align: center;">Update</th>
                                <th width="10%" style="text-align: center;">Remove</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        <img src="~/Images/counter-1.png" width="250px">
                                        <p><br><b>@item.sProName</b></p>
                                    </td>
                                    <td>@String.Format("{0:0,0}", @item.dPrice) VNĐ</td>

                                    @using (Html.BeginForm("UpdateCart", "ShoppingCart", new { @ProId = item.iProID }))
                                    {
                                        <td>@Html.TextBox("txtSoLuong", item.iQuantity, new { @size = 5 }) </td>
                                        <td>@String.Format("{0:0,0}", item.dPrice * item.iQuantity) VNĐ</td>
                                        <td>
                                            <input type="submit" value="Cập nhật" />
                                            <br />


                                        </td>
                                    }


                                    <td><a href=" @Url.Action("DeleteCart", "ShoppingCart", new { @ProId = item.iProID })" class="remove" title="Remove this item"><i class="fa fa-trash-o fa-2x"></i></a></td>
                                </tr>
                            }

                        </tbody>
                    </table>

                </div>

                <div class="swin-sc swin-sc-contact-form light mtl style-full">

                    <form>
                        <div class="form-group">
                            <div class="input-group">
                                <p colspan="6" style="text-align:right;color:blue">Tổng thành tiền: @String.Format("{0:0,0}", @ViewBag.MoneySum)</p></tr>
                                <p colspan="6" style="text-align:right;color:blue"><a href="@Url.Action("Index","Product")">Tiếp tục mua hàng</a></p></tr>
                            </div>
                        </div>

                        <div class="form-group">
                            @using (Html.BeginForm("Payment", "ShoppingCart"))
                            {
                                <div class="swin-btn-wrap center"><a href="@Url.Action("Payment","ShoppingCart")" class="swin-btn center form-submit"> <span>Checkout</span></a></div>
                            }
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
